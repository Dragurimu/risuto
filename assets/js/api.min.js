const LOCALE = () => localStorage.getItem('locale') || 'esES'
const VERSION = '1.0.20.0'
const CONNECTIVITY_TYPE = 'drakgons'

function api(opts) {

    if (opts.resource || false) {
        var url = `/api/${opts.reference}/${opts.resource}`;
    } else {
        var url = `/api/${opts.reference}`;
    }

    const config = {

        method: opts.method || 'get',
        url: url,
        headers: {
            'X-Dragurimu': opts.jwt || 'jwt',
        },

        params: !opts.data ? Object.assign({}, opts.params, {
            locale: LOCALE(),
            version: VERSION,
            connectivity_type: CONNECTIVITY_TYPE
        }) : null,

        data: opts.data ? Object.assign({}, opts.data, {
            locale: LOCALE(),
            version: VERSION,
            connectivity_type: CONNECTIVITY_TYPE
        }) : null,
    }

    return axios(config)
}